<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SwersGPT</title>
<link rel="icon" href="https://i.hizliresim.com/82fpag2.png" type="image/png">
<style>
  body {
    margin: 0;
    background: #121212;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  .top {
    background: #1e1e1e;
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid #333;
  }

  .left-group {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .title {
    font-size: 22px;
    font-weight: bold;
  }

  button {
    padding: 10px 18px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    color: white;
  }

  #resetKeyBtn { background: #ff6b6b; }
  #downloadBtn { background: #1e90ff; }

  .chat {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .msg {
    padding: 12px 18px;
    border-radius: 12px;
    max-width: 70%;
    line-height: 1.4;
    word-wrap: break-word;
  }

  .user { background: #0f3d0f; align-self: flex-end; border-bottom-right-radius: 4px; }
  .ai { background: #1a1a1a; align-self: flex-start; border-bottom-left-radius: 4px; }
  .loading { opacity: 0.6; font-style: italic; }

  .input-area {
    display: flex;
    padding: 15px;
    background: #1e1e1e;
    gap: 10px;
    border-top: 1px solid #333;
  }

  #input {
    flex: 1;
    padding: 14px 20px;
    background: #2a2a2a;
    border: none;
    border-radius: 25px;
    color: white;
    outline: none;
    font-size: 16px;
  }

  #send {
    background: #6e56cf;
  }

  /* Modal */
  #keyModal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 999;
  }

  .modal-content {
    background: #1e1e1e;
    padding: 30px;
    border-radius: 12px;
    width: 400px;
    text-align: center;
  }

  .modal-content input {
    width: 100%;
    padding: 12px;
    margin: 15px 0;
    background: #333;
    border: none;
    border-radius: 8px;
    color: white;
  }

  .modal-content button {
    padding: 12px 25px;
    background: #1e90ff;
    border: none;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- API Key Modal -->
<div id="keyModal">
  <div class="modal-content">
    <h2>SwersGPT</h2>
    <p>Groq API anahtarÄ±nÄ± gir:</p>
    <input id="apiKeyInput" placeholder="gsk_XXXXXXX">
    <button onclick="saveKey()">Kaydet</button>
    <p style="font-size:12px;margin-top:15px;">2025 Â© Aury Software</p>
  </div>
</div>

<div class="top">
  <div class="left-group">
    <div class="title">SwersGPT</div>
    <button id="resetKeyBtn" title="AnahtarÄ± sÄ±fÄ±rla">ðŸ”„</button>
  </div>
  <button id="downloadBtn" onclick="window.location.href='https://github.com/SwersGPT/SwersGPT.github.io/releases/download/1.0/SwersGPT.exe'">Windows iÃ§in Ä°ndir</button>
</div>

<div id="chat" class="chat"></div>

<div class="input-area">
  <input id="input" placeholder="Mesaj yaz...">
  <button id="send">GÃ¶nder</button>
</div>

<script>
let API_KEY = localStorage.getItem("groq_key");
const chat = document.getElementById("chat");
const input = document.getElementById("input");

function addMsg(text, type) {
  const div = document.createElement("div");
  div.className = `msg ${type}`;
  div.innerHTML = text.replace(/\n/g,"<br>");
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
  return div;
}

if (!API_KEY) document.getElementById("keyModal").style.display = "flex";
else addMsg("HazÄ±rÄ±m! Bana bir ÅŸey sorabilirsin.", "ai");

function saveKey() {
  const key = document.getElementById("apiKeyInput").value.trim();
  if (!key) return alert("Anahtar boÅŸ olamaz!");
  localStorage.setItem("groq_key", key);
  API_KEY = key;
  document.getElementById("keyModal").style.display = "none";
  addMsg("API anahtarÄ± kaydedildi, baÅŸlayabiliriz!", "ai");
}

document.getElementById("resetKeyBtn").onclick = () => {
  localStorage.removeItem("groq_key");
  API_KEY = null;
  chat.innerHTML = "";
  document.getElementById("keyModal").style.display = "flex";
  alert("Anahtar sÄ±fÄ±rlandÄ±! Yeni anahtar girin.");
};

document.getElementById("send").onclick = sendMessage;
input.addEventListener("keypress", e => { if(e.key==="Enter") sendMessage(); });

async function sendMessage() {
  const text = input.value.trim();
  if(!text || !API_KEY) return;

  addMsg(text, "user");
  input.value = "";

  const loadingDiv = addMsg("YazÄ±yor...", "ai");
  loadingDiv.classList.add("loading");

  try {
    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method:"POST",
      headers: {
        "Authorization": "Bearer " + API_KEY,
        "Content-Type":"application/json"
      },
      body: JSON.stringify({
        model:"llama-3.3-70b-versatile",
        messages:[
          {role:"system", content:`SwersGPT olarak Ã§alÄ±ÅŸÄ±yorsun.
Kurallar:
- "Sen kimsin" veya "AdÄ±n ne" sorularÄ±na: "Ben SwersGPTâ€™yim." de.
- "Aury kim?" sorularÄ±na: "Aury, SwersGPTâ€™nin geliÅŸtiricisidir." de.
- Normal sorularda imza kullanma.`},
          {role:"user", content:text}
        ]
      })
    });

    const data = await response.json();
    if(!data.choices || !data.choices[0] || !data.choices[0].message) {
      loadingDiv.innerHTML = "Hata: GeÃ§ersiz yanÄ±t.";
      loadingDiv.style.color = "#ff6b6b";
      loadingDiv.classList.remove("loading");
      return;
    }

    loadingDiv.innerHTML = data.choices[0].message.content.replace(/\n/g,"<br>");
    loadingDiv.classList.remove("loading");

  } catch(err) {
    loadingDiv.innerHTML = "Hata: " + err.message;
    loadingDiv.style.color = "#ff6b6b";
    loadingDiv.classList.remove("loading");
  }

  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
